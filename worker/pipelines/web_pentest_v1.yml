stage: web_pentest_v1
tools:
  # Step 1: httpx probe (live targets)
  - name: httpx
    enabled: true
    timeout: 120
    artifact_name: httpx.jsonl

  # Step 2: katana crawl (discovered endpoints)
  - name: katana
    enabled: true
    timeout: 100
    artifact_name: katana_urls.txt
    args:
      depth: 2
      max_urls: 10000

  # Step 3 (optional): ffuf fuzzing/discovery
  - name: ffuf
    enabled: true
    timeout: 100
    artifact_name: ffuf.json
    args:
      threads: 20
      req_timeout: 5
      max_dirs: 200

  # Step 4: nuclei scan (vulnerabilities)
  - name: nuclei
    enabled: true
    timeout: 600
    artifact_name: nuclei.jsonl
    args:
      # Keep nuclei bounded so it finishes reliably.
      templates: "/opt/nuclei-templates/http/"
      rate_limit: 25
      timeout: 8
      retries: 1
      concurrency: 15
      max_katana_urls: 2000
      max_targets: 2500
      include_raw: false
